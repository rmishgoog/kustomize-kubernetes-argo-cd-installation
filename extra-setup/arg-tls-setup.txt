#Reserve yourself an IP address
gcloud compute addresses create argo-cd-global-ip --global
gcloud compute addresses describe argo-cd-global-ip --global

#Enable cloud endpoints
gcloud services enable endpoints.googleapis.com
export PROJECT=$(gcloud config get-value project)
export GCLB_IP=34.111.130.207

#Generate dns-spec.yaml
cat <<EOF > dns-spec.yaml
swagger: "2.0"
info:
  description: "Cloud Endpoints DNS"
  title: "Cloud Endpoints DNS"
  version: "1.0.0"
paths: {}
host: "frontend.endpoints.${PROJECT}.cloud.goog"
x-google-endpoints:
- name: "frontend.endpoints.${PROJECT}.cloud.goog"
  target: "${GCLB_IP}"
EOF

#Finally, execute it.
#Next Apply the kubernetes manifest in the parent directory and you should have it up and running
